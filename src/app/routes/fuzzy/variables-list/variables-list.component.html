<mat-card class="fuzzy-card">
  <mat-card-title>{{ title }}</mat-card-title>
  <mat-card-content>
    <mat-list>
      <mat-list-item *ngFor="let variable of variables; let i = index">
        <h3 matLine>
          {{ variable.name }} goes from
          <strong>{{ variable.start }} to {{ variable.end }}</strong>
        </h3>
        <p matLine>
          <span> FuzzyAreas: </span>
          <mat-chip-list aria-label="Fish selection">
            <mat-chip *ngFor="let fuzzyArea of variable.fuzzyAreas">{{
              fuzzyArea.name
            }}</mat-chip>
          </mat-chip-list>
        </p>
        <section
          matLine
          *ngIf="variable.fuzzyAreasCount > variable.fuzzyAreas.length"
        >
          <h5>Add new input variable fuzzyArea:</h5>
          <form
            [formGroup]="form"
            (ngSubmit)="addFuzzyArea($event, variable, i)"
          >
            <mat-form-field class="input-full-width">
              <mat-label>Name</mat-label>
              <input matInput placeholder="Name" formControlName="name" />
              <mat-error *ngIf="form.get('name').hasError('required')">
                Name is required
              </mat-error>
            </mat-form-field>
            <br />
            <div formGroupName="type">
              <mat-form-field>
                <mat-label>Type</mat-label>
                <mat-select formControlName="name">
                  <mat-option
                    *ngFor="let fuzzyArea of this.mamdaniService.fuzzyAreas"
                    [value]="fuzzyArea.type.name"
                  >
                    {{ fuzzyArea.name }}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="form.get('type').hasError('required')">
                  Type is required
                </mat-error>
              </mat-form-field>
              <span formArrayName="ranges">
                <label for="fuzzy-area-value" style="margin: 0 10px"
                  >Value:</label
                >
                <span *ngFor="let range of ranges.controls; let i = index">
                  <ng-container [formGroupName]="i">
                    <mat-form-field style="width: 100px; margin: 0 10px">
                      <mat-label>Range {{ i + 1 }}</mat-label>
                      <input
                        matInput
                        type="number"
                        placeholder="Name"
                        [formControlName]="getRangeName(i)"
                      />
                      <mat-error
                        *ngIf="range.get(getRangeName(i)).hasError('required')"
                      >
                        Required
                      </mat-error>
                    </mat-form-field>
                  </ng-container>
                </span>
              </span>
            </div>

            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="!form.valid"
            >
              Add FuzzyArea
            </button>
          </form>
        </section>
      </mat-list-item>
    </mat-list>
  </mat-card-content>
</mat-card>
