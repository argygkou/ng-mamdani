<div class="container">
  <mat-card class="mat-elevation-z4">
    <mat-card-content>
      <form [formGroup]="form">
        <mat-vertical-stepper formArrayName="variables" linear #stepper>
          <mat-step
            *ngFor="
              let variableGroup of form.get('variables')['controls'];
              let i = index;
              let last = last
            "
            [formGroupName]="i"
            [stepControl]="variableGroup"
          >
            <ng-template matStepLabel>{{
              variableGroup.get("name").value
            }}</ng-template>
            <app-star-rating
              [end]="calculateMaxValue(i)"
              formControlName="example"
            ></app-star-rating>
            <div>
              <button *ngIf="i > 0" mat-button matStepperPrevious type="button">
                Back
              </button>
              <button *ngIf="!last" mat-button matStepperNext type="button">
                Next
              </button>
              <button
                *ngIf="last"
                mat-button
                color="primary"
                (click)="getResult()"
              >
                Finish
              </button>
            </div>
          </mat-step>
        </mat-vertical-stepper>
      </form>
    </mat-card-content>
  </mat-card>
</div>
