<div class="container">
  <mat-card class="mat-elevation-z4">
    <mat-card-content>
      <form [formGroup]="form">
        <mat-vertical-stepper formArrayName="variables" linear #stepper>
          <mat-step
            *ngFor="
              let variableGroup of form.get('variables')['controls'];
              let i = index;
              let last = last
            "
            [formGroupName]="i"
            [stepControl]="variableGroup"
          >
            <ng-template matStepLabel>{{
              variableGroup.get("name").value
            }}</ng-template>
            <mat-form-field>
              <mat-label></mat-label>
              <input
                matInput
                type="number"
                autocomplete="off"
                placeholder="enter a value"
                formControlName="example"
                autocomplete="off"
              />
              <mat-error
                *ngIf="variableGroup.get('example').hasError('required')"
              >
                Please enter a value
              </mat-error>
              <mat-error *ngIf="variableGroup.get('example').hasError('min')">
                Minimum value:
                <strong>{{
                  variableGroup.get("example").errors.min.min
                }}</strong>
              </mat-error>
              <mat-error *ngIf="variableGroup.get('example').hasError('max')">
                Maximum value:
                <strong>{{
                  variableGroup.get("example").errors.max.max
                }}</strong>
              </mat-error>
            </mat-form-field>
            <div>
              <button *ngIf="i > 0" mat-button matStepperPrevious type="button">
                Back
              </button>
              <button *ngIf="!last" mat-button matStepperNext type="button">
                Next
              </button>
              <button
                *ngIf="last"
                mat-button
                color="primary"
                (click)="getResult()"
              >
                Finish
              </button>
            </div>
          </mat-step>
        </mat-vertical-stepper>
      </form>
    </mat-card-content>
  </mat-card>
</div>
