<div class="container">
  <mat-card class="mat-elevation-z4">
    <mat-card-content>
      <form [formGroup]="form">
        <mat-vertical-stepper formArrayName="variables" #stepper>
          <mat-step
            *ngFor="
              let variableGroup of form.get('variables')['controls'];
              let i = index;
              let last = last
            "
            [formGroupName]="i"
          >
            <ng-template matStepLabel>{{
              variableGroup.get("name").value
            }}</ng-template>
            <mat-form-field>
              <mat-label></mat-label>
              <input
                matInput
                placeholder="enter a value"
                formControlName="example"
              />
              <mat-error
                *ngIf="variableGroup.get('example').hasError('required')"
              >
                Please enter a value
              </mat-error>
            </mat-form-field>
            <div>
              <button mat-button matStepperPrevious>Back</button>
              <button *ngIf="!last" mat-button matStepperNext>Next</button>
              <button
                *ngIf="last"
                mat-button
                color="primary"
                (click)="getResult()"
              >
                Finish
              </button>
            </div>
          </mat-step>
        </mat-vertical-stepper>
      </form>
    </mat-card-content>
  </mat-card>
</div>
