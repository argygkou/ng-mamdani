<mat-card>
  <mat-card-title>{{ title }}</mat-card-title>
  <mat-card-content>
    <mat-list>
      <mat-list-item *ngFor="let variable of variables; let i = index">
        <h3 matLine>
          {{ variable.name }} goes from
          <strong>{{ variable.start }} to {{ variable.end }}</strong>
        </h3>
        <p matLine>
          <mat-chip-list aria-label="Fish selection">
            <mat-chip *ngFor="let fuzzyArea of variable.fuzzyAreas">{{
              fuzzyArea.name
            }}</mat-chip>
          </mat-chip-list>
        </p>
        <section
          matLine
          *ngIf="variable.fuzzyAreasCount > variable.fuzzyAreas.length"
        >
          <h5>Add new input variable fuzzyArea:</h5>
          <form
            [formGroup]="form"
            (ngSubmit)="addFuzzyArea($event, variable, i)"
          >
            <mat-form-field class="input-full-width">
              <mat-label>Name</mat-label>
              <input matInput placeholder="Name" formControlName="name" />
              <mat-error *ngIf="form.get('name').hasError('required')">
                Name is required
              </mat-error>
            </mat-form-field>
            <br />
            <mat-form-field>
              <mat-label>Type</mat-label>
              <mat-select formControlName="type">
                <mat-option
                  *ngFor="let fuzzyArea of fuzzyAreaTypes"
                  [value]="fuzzyArea"
                >
                  {{ fuzzyArea }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="form.get('type').hasError('required')">
                Type is required
              </mat-error>
            </mat-form-field>
            <span formArrayName="ranges">
              <label for="fuzzy-area-value" style="margin: 0 10px"
                >Value:</label
              >
              <span *ngFor="let range of ranges.controls; let i = index">
                <ng-container>
                  <mat-form-field style="width: 100px; margin: 0 10px">
                    <mat-label>Range {{ i + 1 }}</mat-label>
                    <input
                      matInput
                      type="number"
                      placeholder="Name"
                      [formControlName]="i"
                    />
                    <mat-error *ngIf="range.hasError('required')">
                      Required
                    </mat-error>
                  </mat-form-field>
                </ng-container>
              </span>
            </span>

            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="!form.valid"
            >
              Add FuzzyArea
            </button>
          </form>
        </section>
      </mat-list-item>
    </mat-list>
  </mat-card-content>
  <mat-card-actions>
    <button
      mat-raised-button
      color="primary"
      (click)="openDialog()"
      *ngIf="type === 'inputs'"
    >
      Add variable
    </button>
  </mat-card-actions>
</mat-card>
