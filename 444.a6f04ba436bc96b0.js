"use strict";(self.webpackChunkng_mamdani=self.webpackChunkng_mamdani||[]).push([[444],{4444:(wt,z,m)=>{m.r(z),m.d(z,{ConfigModule:()=>Lt});var L=m(6215),_=m(3060),t=m(4650),f=m(4836),s=m(6895),g=m(1576),u=m(3546),F=m(3848),v=m(7579),q=m(2394),x=m(8036),i=m(4006),p=m(9549),Z=m(4144);function V(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a value "),t.qZA())}function w(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Minimum value: "),t.TgZ(2,"strong"),t._uU(3),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.get("example").errors.min.min)}}function R(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Maximum value: "),t.TgZ(2,"strong"),t._uU(3),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.get("example").errors.max.max)}}function Q(o,n){if(1&o&&(t.TgZ(0,"span")(1,"span",11),t._uU(2),t.qZA(),t.TgZ(3,"span",12),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&o){const e=n.$implicit,a=t.oxw().$implicit,r=t.oxw();t.xp6(2),t.hij("",e.name,":"),t.xp6(2),t.Oqu(t.lcZ(5,2,r.calculateValue(e,a.get("example").value)))}}function Y(o,n){if(1&o&&(t.TgZ(0,"div",5)(1,"mat-form-field",6)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",7),t.YNc(5,V,2,0,"mat-error",8),t.YNc(6,w,4,1,"mat-error",8),t.YNc(7,R,4,1,"mat-error",8),t.qZA(),t.TgZ(8,"div",9),t.YNc(9,Q,6,4,"span",10),t.qZA()()),2&o){const e=n.$implicit,a=n.index,r=t.oxw();t.Q6J("formGroupName",a),t.xp6(3),t.Oqu(e.get("name").value),t.xp6(2),t.Q6J("ngIf",e.get("example").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.get("example").hasError("min")),t.xp6(1),t.Q6J("ngIf",e.get("example").hasError("max")),t.xp6(2),t.Q6J("ngForOf",r.getFuzzyAreas(e.get("name").value))}}let S=(()=>{class o{constructor(e,a){this.mamdaniService=e,this.formCreatorService=a,this.destroy$=new v.x}ngOnInit(){this.initExampleForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}calculateValue(e,a){return a?q.N[e.type](e.ranges,a):0}getFuzzyAreas(e){const a=this.inputVariables.find(r=>r.name===e);return a&&a.fuzzyAreas||[]}getResult(){const e=this.form.get("variables").value,a=this.mamdaniService.getResult(e);return a?`${a.fuzzyAreas?.output.name} is ${a.fuzzyAreas?.output.area}`:""}initExampleForm(){this.form=this.formCreatorService.initExampleForm(),this.mamdaniService.inputVariables$.pipe().subscribe(e=>{this.inputVariables=e;const a=this.form.get("variables");a.clear(),this.inputVariables.forEach(r=>{a.push(this.formCreatorService.addExample(r))})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q),t.Y36(x.A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-examples-form"]],decls:12,vars:3,consts:[[1,"mat-elevation-z4"],[3,"formGroup"],["formArrayName","variables"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"ms-4"],[3,"formGroupName"],[1,"example-input","mx-3","mt-3"],["matInput","","type","number","autocomplete","off","formControlName","example"],[4,"ngIf"],[1,"fuzzy-area-values","ms-3"],[4,"ngFor","ngForOf"],[1,"me-2"],[1,"me-3","contain-value"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title"),t._uU(2,"Provide example for your variables:"),t.qZA(),t.TgZ(3,"mat-card-content")(4,"form",1)(5,"div",2),t.YNc(6,Y,10,6,"div",3),t.qZA()()(),t.TgZ(7,"mat-card-actions")(8,"p",4),t._uU(9," Result is: "),t.TgZ(10,"strong"),t._uU(11),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("ngForOf",a.form.get("variables").controls),t.xp6(5),t.Oqu(a.getResult()))},dependencies:[s.sg,s.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,p.TO,p.KE,p.hX,Z.Nt,u.a8,u.dn,u.n5,u.hq,s.JJ],styles:[".example-input[_ngcontent-%COMP%]{width:300px}.contain-value[_ngcontent-%COMP%]{font-weight:700}.fuzzy-area-values[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}"]}),o})();function $(o,n){if(1&o&&(t.TgZ(0,"a",6,7),t._uU(2),t.ALo(3,"titlecase"),t.qZA()),2&o){const e=n.$implicit,a=t.MAs(1);t.Q6J("routerLink",e)("active",a.isActive),t.xp6(2),t.hij(" ",t.lcZ(3,3,e)," ")}}let E=(()=>{class o{constructor(e){this.mamdaniService=e,this.links=["inputs","output","rules"]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-config"]],decls:9,vars:1,consts:[["fxLayout","row","fxLayout.xs","column","fxLayoutGap","20px",1,"config-container"],["fxFlex","40"],["fxFlex","60"],[1,"mat-elevation-z4"],["mat-tab-nav-bar",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-examples-form"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-card",3)(5,"mat-card-content")(6,"nav",4),t.YNc(7,$,4,5,"a",5),t.qZA(),t._UZ(8,"router-outlet"),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("ngForOf",a.links))},dependencies:[s.sg,g.xw,g.SQ,g.yH,u.a8,u.dn,F.BU,F.Nj,_.lC,_.yS,_.Od,S,s.rS],styles:[".config-container[_ngcontent-%COMP%]{margin:0 20px}"]}),o})();var A=m(2722),d=m(4859),C=m(4850),I=m(4385),h=m(3238),c=m(5412),O=m(6469);function M(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.toggleNorm())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.typeControl.value," ")}}function D(o,n){if(1&o&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function G(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.qZA())}function k(o,n){if(1&o&&(t.TgZ(0,"mat-form-field",16)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",17),t.YNc(4,D,2,2,"mat-option",18),t.qZA(),t.YNc(5,G,2,0,"mat-error",19),t.qZA()),2&o){const e=n.ngIf,a=t.oxw(),r=a.index,l=a.$implicit;t.xp6(2),t.Oqu(e[r].name),t.xp6(2),t.Q6J("ngForOf",e[r].fuzzyAreas),t.xp6(1),t.Q6J("ngIf",l.hasError("required"))}}function j(o,n){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,M,2,1,"button",12),t.ynx(2,13),t.YNc(3,k,6,3,"mat-form-field",14),t.ALo(4,"async"),t.BQk(),t.qZA()),2&o){const e=n.index,a=t.oxw();t.xp6(1),t.Q6J("ngIf",e>0),t.xp6(1),t.Q6J("formGroupName",e),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,3,a.mamdaniService.inputVariables$))}}const P=function(o,n){return{name:o,area:n}};function H(o,n){if(1&o&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&o){const e=n.$implicit,a=t.oxw().$implicit;t.Q6J("value",t.WLB(2,P,a.name,e.name)),t.xp6(1),t.hij(" ",e.name," ")}}function X(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.qZA())}function K(o,n){if(1&o&&(t.TgZ(0,"mat-form-field",16)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",21),t.YNc(4,H,2,5,"mat-option",18),t.qZA(),t.YNc(5,X,2,0,"mat-error",19),t.qZA()),2&o){const e=n.$implicit,a=t.oxw();t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngForOf",e.fuzzyAreas),t.xp6(1),t.Q6J("ngIf",a.output.hasError("required"))}}let B=(()=>{class o{constructor(e,a){this.mamdaniService=e,this.formCreatorService=a,this.destroy$=new v.x}get typeControl(){return this.form.get("type")}get fuzzyAreas(){return this.form.get("fuzzyAreas")}get inputs(){return this.fuzzyAreas.get("inputs")}get output(){return this.fuzzyAreas.get("output")}ngOnInit(){this.initForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}createRule(e){e.preventDefault();const a=this.form.value,r=a.fuzzyAreas.inputs.filter(l=>l.area);a.fuzzyAreas.inputs=r.map(l=>({name:l.name,area:l.area.name})),a.fuzzyAreas.inputs.length>0&&(this.mamdaniService.addRule(a),this.form.reset())}toggleNorm(){this.typeControl.setValue("AND"===this.typeControl.value?"OR":"AND")}initForm(){this.form=this.formCreatorService.createRuleForm(),this.mamdaniService.inputVariables$.pipe((0,A.R)(this.destroy$)).subscribe(e=>{e.forEach(a=>{this.inputs.push(new i.nJ({name:new i.p4(a.name),area:new i.p4(null)}))})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q),t.Y36(x.A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rules-composer"]],decls:23,vars:6,consts:[[3,"formGroup","ngSubmit"],["dialog-title",""],["dialog-content","","formGroupName","fuzzyAreas"],[1,"row"],[1,"col-md-1"],[1,"mt-3"],["formArrayName","inputs",1,"col-md-11"],[4,"ngFor","ngForOf"],[1,"col-md-11"],["appearance","fill",4,"ngFor","ngForOf"],["dialog-actions",""],["mat-button","","mat-dialog-close","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-mini-fab","","type","button","color","primary","class","fab-control mx-3",3,"click",4,"ngIf"],[3,"formGroupName"],["appearance","fill",4,"ngIf"],["mat-mini-fab","","type","button","color","primary",1,"fab-control","mx-3",3,"click"],["appearance","fill"],["formControlName","area"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["formControlName","output"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(l){return a.createRule(l)}),t.TgZ(1,"app-custom-modal")(2,"h1",1),t._uU(3,"Add Rule"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"p",5),t._uU(8,"IF"),t.qZA()(),t.TgZ(9,"div",6),t.YNc(10,j,5,5,"span",7),t.qZA()(),t._UZ(11,"mat-divider")(12,"br"),t.TgZ(13,"div",3)(14,"div",4)(15,"p",5),t._uU(16,"THEN"),t.qZA()(),t.TgZ(17,"div",8),t.YNc(18,K,6,3,"mat-form-field",9),t.ALo(19,"async"),t.qZA()()(),t.TgZ(20,"div",10)(21,"button",11),t._uU(22," Save "),t.qZA()()()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(10),t.Q6J("ngForOf",a.inputs.controls),t.xp6(8),t.Q6J("ngForOf",t.lcZ(19,4,a.mamdaniService.outputVariables$)),t.xp6(3),t.Q6J("disabled",!a.form.valid))},dependencies:[s.sg,s.O5,i._Y,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,d.lW,C.d,p.TO,p.KE,p.hX,I.gD,h.ey,c.ZT,O.R,s.Ov],styles:[".fab-control[_ngcontent-%COMP%]{bottom:5px}"]}),o})();var T=m(3336),b=m(6338);function W(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item")(1,"p",4),t._uU(2,"No Rules. Add some!"),t.qZA(),t.TgZ(3,"button",5),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.openDialog())}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA()()()}}function tt(o,n){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"lowercase"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.type)," ")}}function et(o,n){if(1&o&&(t.TgZ(0,"span")(1,"strong"),t._uU(2),t.qZA(),t._uU(3," is "),t.TgZ(4,"strong"),t._uU(5),t.qZA(),t.YNc(6,tt,3,3,"span",1),t.qZA()),2&o){const e=n.$implicit,a=n.last;t.xp6(2),t.Oqu(e.name),t.xp6(3),t.Oqu(e.area),t.xp6(1),t.Q6J("ngIf",!a)}}function ot(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item")(1,"h4",4),t._uU(2),t.qZA(),t.TgZ(3,"p",4)(4,"span"),t._uU(5,"If "),t.qZA(),t.YNc(6,et,7,3,"span",3),t._uU(7," then "),t.TgZ(8,"strong"),t._uU(9),t.qZA(),t._uU(10," is "),t.TgZ(11,"strong"),t._uU(12),t.qZA()(),t.TgZ(13,"button",6),t.NdJ("click",function(){const l=t.CHM(e).index,y=t.oxw(2);return t.KtG(y.removeRule(l))}),t.TgZ(14,"mat-icon"),t._uU(15,"delete"),t.qZA()()()}if(2&o){const e=n.$implicit,a=n.index;t.xp6(2),t.hij("Rule ",a+1,""),t.xp6(4),t.Q6J("ngForOf",e.fuzzyAreas.inputs),t.xp6(3),t.Oqu(e.fuzzyAreas.output.name),t.xp6(3),t.Oqu(e.fuzzyAreas.output.area)}}function at(o,n){if(1&o&&(t.TgZ(0,"mat-list"),t.YNc(1,W,6,0,"mat-list-item",1),t.YNc(2,ot,16,4,"mat-list-item",3),t.qZA()),2&o){const e=n.ngIf;t.xp6(1),t.Q6J("ngIf",0===e.length),t.xp6(1),t.Q6J("ngForOf",e)}}let nt=(()=>{class o{constructor(e,a){this.mamdaniService=e,this.dialog=a}openDialog(){this.dialog.open(B,{width:"1200px"})}removeRule(e){this.mamdaniService.removeRule(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q),t.Y36(c.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rules-list"]],decls:9,vars:3,consts:[[1,"mat-elevation-z0"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"],["matLine",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title"),t._uU(2,"Rules"),t.qZA(),t.TgZ(3,"mat-card-content"),t.YNc(4,at,3,2,"mat-list",1),t.ALo(5,"async"),t.qZA(),t.TgZ(6,"mat-card-actions")(7,"button",2),t.NdJ("click",function(){return a.openDialog()}),t._uU(8," Add Rule "),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",t.lcZ(5,1,a.mamdaniService.rules$)))},dependencies:[s.sg,s.O5,d.lW,T.Hw,b.i$,b.Tg,h.X2,u.a8,u.dn,u.n5,u.hq,s.Ov,s.i8],styles:[".mat-list-item[_ngcontent-%COMP%]{margin:30px 0}[_nghost-%COMP%]     .mat-list .mat-list-item .mat-line{word-wrap:break-word;white-space:pre-wrap}"]}),o})();function rt(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function it(o,n){if(1&o&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function mt(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Type is required "),t.qZA())}function st(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.qZA())}function lt(o,n){if(1&o&&(t.TgZ(0,"span"),t.ynx(1),t.TgZ(2,"mat-form-field",12)(3,"mat-label"),t._uU(4),t.qZA(),t._UZ(5,"input",13),t.YNc(6,st,2,0,"mat-error",3),t.qZA(),t.BQk(),t.qZA()),2&o){const e=n.$implicit,a=n.index;t.xp6(4),t.hij("Range ",a+1,""),t.xp6(1),t.Q6J("formControlName",a),t.xp6(1),t.Q6J("ngIf",e.hasError("required"))}}let J=(()=>{class o{constructor(e){this.mamdaniService=e,this.fuzzyAreaTypes=Object.keys(q.N),this.onDestroy$=new v.x}get ranges(){return this.form.get("ranges")}ngOnChanges(e){e.form&&this.form&&this.formTypeChangeSubsciption()}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}formTypeChangeSubsciption(){this.form.get("type").valueChanges.pipe((0,A.R)(this.onDestroy$)).subscribe(e=>{this.ranges.clear();const a="Trapezoid"===e?4:3;for(let r=0;r<a;r++)this.ranges.push(new i.p4(0,i.kI.required))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-fuzzy-area-form"]],inputs:{form:"form"},features:[t.TTD],decls:17,vars:5,consts:[[1,"fuzzy-area-form",3,"formGroup"],[1,"fuzzy-area-name-input"],["matInput","","placeholder","Name","formControlName","name","autocomplete","off"],[4,"ngIf"],["fxLayout","row wrap ","fxLayoutAlign","start center"],[1,"me-3"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","ranges","fxLayout","row wrap","fxLayoutAlign","start center"],["for","fuzzy-area-value",1,"me-3"],[4,"ngFor","ngForOf"],[3,"value"],[1,"fuzzy-area-range-input","mx-3"],["matInput","","type","number","autocomplete","off","placeholder","Name",3,"formControlName"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Name"),t.qZA(),t._UZ(4,"input",2),t.YNc(5,rt,2,0,"mat-error",3),t.qZA(),t.TgZ(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Type"),t.qZA(),t.TgZ(10,"mat-select",6),t.YNc(11,it,2,2,"mat-option",7),t.qZA(),t.YNc(12,mt,2,0,"mat-error",3),t.qZA(),t.TgZ(13,"div",8)(14,"label",9),t._uU(15,"Value:"),t.qZA(),t.YNc(16,lt,7,3,"span",10),t.qZA()()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(5),t.Q6J("ngIf",a.form.get("name").hasError("required")),t.xp6(6),t.Q6J("ngForOf",a.fuzzyAreaTypes),t.xp6(1),t.Q6J("ngIf",a.form.get("type").hasError("required")),t.xp6(4),t.Q6J("ngForOf",a.ranges.controls))},dependencies:[s.sg,s.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.CE,g.xw,g.Wh,p.TO,p.KE,p.hX,Z.Nt,I.gD,h.ey],styles:[".fuzzy-area-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.fuzzy-area-form[_ngcontent-%COMP%]   .fuzzy-area-name-input[_ngcontent-%COMP%]{width:50%}.fuzzy-area-form[_ngcontent-%COMP%]   .fuzzy-area-range-input[_ngcontent-%COMP%]{width:100px}"]}),o})();function ut(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.qZA())}function pt(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.qZA())}function ct(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Minumun number of fuzzy areas 1 "),t.qZA())}function ft(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.qZA())}function _t(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.qZA())}function gt(o,n){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"app-fuzzy-area-form",15)(2,"mat-divider"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("form",e)}}let dt=(()=>{class o{constructor(e,a,r){this.data=e,this.formCreatorService=a,this.mamdaniService=r,this.form=this.formCreatorService.createVariableForm(),this.onDestroy$=new v.x}get fuzzyAreasArray(){return this.form.get("fuzzyAreas")}get fuzzyAreasControls(){return this.fuzzyAreasArray.controls}ngOnInit(){this.form.get("fuzzyAreasCount").valueChanges.pipe((0,A.R)(this.onDestroy$)).subscribe(e=>{const a=this.form.get("fuzzyAreas");a.clear();for(let r=0;r<e;r++)a.push(this.formCreatorService.createFuzzyAreaForm())})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}getDialogTitle(){return"inputs"===this.data.type?"Add Input Variable":"Edit Output Variable"}addVariable(e){e.preventDefault(),"inputs"===this.data.type?this.mamdaniService.addInputVariable(this.form.value):this.mamdaniService.addOutputVariable(this.form.value),this.form.reset(),this.form=this.formCreatorService.createVariableForm()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.WI),t.Y36(x.A),t.Y36(f.q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-variables-form"]],decls:41,vars:9,consts:[[3,"formGroup","ngSubmit"],["dialog-title",""],["dialog-content",""],[1,"row"],[1,"col-6"],[1,"input-full-width"],["matInput","","placeholder","Name","formControlName","name"],[4,"ngIf"],["matInput","","placeholder","fuzzy areas count","autocomplete","off","type","number","min","0","formControlName","fuzzyAreasCount"],["matInput","","placeholder","Start","autocomplete","off","type","number","formControlName","start"],["matInput","","placeholder","End","autocomplete","off","type","number","formControlName","end"],[1,"my-3"],[4,"ngFor","ngForOf"],["dialog-actions",""],["mat-button","","mat-dialog-close","","mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"form"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(l){return a.addVariable(l)}),t.TgZ(1,"app-custom-modal")(2,"h1",1),t._uU(3),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Variable Name"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,ut,2,0,"mat-error",7),t.qZA()(),t.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),t._uU(15,"Number of fuzzyAreas"),t.qZA(),t._UZ(16,"input",8),t.YNc(17,pt,2,0,"mat-error",7),t.YNc(18,ct,2,0,"mat-error",7),t.qZA()()(),t._UZ(19,"br"),t.TgZ(20,"div",3)(21,"div",4)(22,"mat-form-field",5)(23,"mat-label"),t._uU(24,"Range: Start"),t.qZA(),t._UZ(25,"input",9),t.YNc(26,ft,2,0,"mat-error",7),t.qZA()(),t.TgZ(27,"div",4)(28,"mat-form-field",5)(29,"mat-label"),t._uU(30,"Range: End"),t.qZA(),t._UZ(31,"input",10),t.YNc(32,_t,2,0,"mat-error",7),t.qZA()()(),t._UZ(33,"mat-divider"),t.TgZ(34,"div",11)(35,"h2"),t._uU(36,"Fuzzy Areas"),t.qZA(),t.YNc(37,gt,3,1,"div",12),t.qZA()(),t.TgZ(38,"div",13)(39,"button",14),t._uU(40," Save "),t.qZA()()()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(3),t.Oqu(a.getDialogTitle()),t.xp6(8),t.Q6J("ngIf",a.form.get("name").hasError("required")),t.xp6(6),t.Q6J("ngIf",a.form.get("fuzzyAreasCount").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.form.get("fuzzyAreasCount").hasError("min")),t.xp6(8),t.Q6J("ngIf",a.form.get("start").hasError("required")),t.xp6(6),t.Q6J("ngIf",a.form.get("end").hasError("required")),t.xp6(5),t.Q6J("ngForOf",a.fuzzyAreasControls),t.xp6(2),t.Q6J("disabled",!a.form.valid))},dependencies:[s.sg,s.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.qQ,i.sg,i.u,d.lW,C.d,p.TO,p.KE,p.hX,Z.Nt,c.ZT,O.R,J],styles:[".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}"]}),o})();var vt=m(5698),N=m(811);let ht=(()=>{class o{constructor(e,a){this.mamdaniService=e,this.formCreatorService=a,this.form=this.formCreatorService.createVariableForm(),this.onDestroy$=new v.x}get ranges(){return this.form.get("ranges")}ngOnChanges(e){e.fuzzyArea&&this.initForm()}ngOnInit(){this.initForm()}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}updateFuzzyArea(e){e.preventDefault(),this.mamdaniService.addFuzzyArea(this.type,this.variableIndex,this.itemIndex,this.form.value)}initForm(){this.form=this.formCreatorService.createFuzzyAreaForm(),this.form.patchValue(this.fuzzyArea),this.fuzzyArea.ranges.forEach(e=>{this.ranges.push(new i.p4(e,i.kI.required))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q),t.Y36(x.A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-variables-list-item-form"]],inputs:{variable:"variable",fuzzyArea:"fuzzyArea",variableIndex:"variableIndex",itemIndex:"itemIndex",type:"type"},features:[t.TTD],decls:4,vars:3,consts:[[1,"mt-3",3,"formGroup","ngSubmit"],[2,"display","inline",3,"form"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(l){return a.updateFuzzyArea(l)}),t._UZ(1,"app-fuzzy-area-form",1),t.TgZ(2,"button",2),t._uU(3," Update "),t.qZA()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(1),t.Q6J("form",a.form),t.xp6(1),t.Q6J("disabled",!a.form.valid))},dependencies:[i._Y,i.JL,i.sg,d.lW,J]}),o})();function yt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"h3")(2,"span",7),t._uU(3),t.TgZ(4,"strong"),t._uU(5),t.qZA()(),t.TgZ(6,"button",8),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.changeMode())}),t.TgZ(7,"mat-icon"),t._uU(8),t.qZA()()(),t._UZ(9,"span",9),t.TgZ(10,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.removeItem.emit(r.itemIndex))}),t.TgZ(11,"mat-icon"),t._uU(12,"delete"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",e.variable.name," goes from "),t.xp6(2),t.AsE("",e.variable.start," to ",e.variable.end,""),t.xp6(3),t.Oqu(e.edit?"close":"edit")}}function xt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-button-toggle",11),t.NdJ("change",function(r){const y=t.CHM(e).index,Vt=t.oxw();return t.KtG(Vt.toggleChanged(r,y))}),t._uU(1),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name,"")}}function bt(o,n){if(1&o&&(t.TgZ(0,"span",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e)}}function Zt(o,n){if(1&o&&(t.TgZ(0,"div")(1,"p",12)(2,"strong"),t._uU(3),t.qZA(),t.YNc(4,bt,2,1,"span",13),t.qZA()()),2&o){const e=t.oxw();t.xp6(3),t.hij("",e.selectedFuzzyArea.type," :"),t.xp6(1),t.Q6J("ngForOf",e.selectedFuzzyArea.ranges)}}function At(o,n){if(1&o&&t._UZ(0,"app-variables-list-item-form",15),2&o){const e=t.oxw();t.Q6J("type",e.type)("variable",e.variable)("variableIndex",e.variableIndex)("itemIndex",e.itemIndex)("fuzzyArea",e.selectedFuzzyArea)}}function Ct(o,n){1&o&&t._UZ(0,"mat-divider")}let Tt=(()=>{class o{constructor(){this.removeItem=new t.vpe}changeMode(){if(this.edit=!this.edit,!this.selectedFuzzyArea&&this.edit)return this.selectedFuzzyArea=this.variable.fuzzyAreas[0],void(this.itemIndex=0)}toggleChanged(e,a){this.itemIndex=a}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-variables-list-item"]],inputs:{variable:"variable",type:"type",variableIndex:"variableIndex"},outputs:{removeItem:"removeItem"},decls:8,vars:6,consts:[["matLine","","fxLayout","row",4,"ngIf"],["matLine",""],[1,"fuzzy-area-toogle-group",3,"ngModel","ngModelChange"],[3,"value","change",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"type","variable","variableIndex","itemIndex","fuzzyArea",4,"ngIf"],["matLine","","fxLayout","row"],[1,"me-2"],["mat-icon-button","","color","primary",3,"click"],[1,"header-spacer"],["mat-icon-button","","color","warn",3,"click"],[3,"value","change"],[1,"my-2"],["class","m-2",4,"ngFor","ngForOf"],[1,"m-2"],[3,"type","variable","variableIndex","itemIndex","fuzzyArea"]],template:function(e,a){1&e&&(t.YNc(0,yt,13,4,"div",0),t.TgZ(1,"div",1)(2,"mat-button-toggle-group",2),t.NdJ("ngModelChange",function(l){return a.selectedFuzzyArea=l}),t.YNc(3,xt,2,2,"mat-button-toggle",3),t.qZA(),t.YNc(4,Zt,5,2,"div",4),t.YNc(5,At,1,5,"app-variables-list-item-form",5),t.qZA(),t._UZ(6,"br"),t.YNc(7,Ct,1,0,"mat-divider",4)),2&e&&(t.Q6J("ngIf",a.variable),t.xp6(2),t.Q6J("ngModel",a.selectedFuzzyArea),t.xp6(1),t.Q6J("ngForOf",a.variable.fuzzyAreas),t.xp6(1),t.Q6J("ngIf",!a.edit&&a.selectedFuzzyArea),t.xp6(1),t.Q6J("ngIf",a.edit),t.xp6(2),t.Q6J("ngIf","inputs"===a.type))},dependencies:[s.sg,s.O5,i.JJ,i.On,g.xw,d.lW,T.Hw,h.X2,C.d,N.A9,N.Yi,ht],styles:["[_nghost-%COMP%]{width:100%}.header-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.fuzzy-area-toogle-group[_ngcontent-%COMP%]{flex-wrap:wrap}"]}),o})();const zt=["deleteDialog"];function Ft(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item")(1,"p",6),t._uU(2,"No Variables. Add some!"),t.qZA(),t.TgZ(3,"button",7),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.openDialog())}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA()()()}}function qt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item")(1,"app-variables-list-item",8),t.NdJ("removeItem",function(){const l=t.CHM(e).index,y=t.oxw(2);return t.KtG(y.onRemoveItem(l))}),t.qZA()()}if(2&o){const e=n.$implicit,a=n.index,r=t.oxw(2);t.xp6(1),t.Q6J("type",r.type)("variable",e)("variableIndex",a)}}function It(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.openDialog())}),t._uU(1," Add variable "),t.qZA()}}function Ot(o,n){if(1&o&&(t.TgZ(0,"mat-card",2)(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-content")(4,"mat-list"),t.YNc(5,Ft,6,0,"mat-list-item",3),t.YNc(6,qt,2,3,"mat-list-item",4),t.qZA()(),t.TgZ(7,"mat-card-actions"),t.YNc(8,It,2,0,"button",5),t.qZA()()),2&o){const e=n.ngIf,a=t.oxw();t.xp6(2),t.hij("",a.title," "),t.xp6(3),t.Q6J("ngIf",0===e.length),t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("ngIf",a.showAddButton(e))}}function Jt(o,n){1&o&&(t.TgZ(0,"h1",10),t._uU(1,"Delete Ouput Variable"),t.qZA(),t.TgZ(2,"div",11),t._uU(3," By deleting Output variable all rules will be automatically deleted. Are you sure? "),t.qZA(),t.TgZ(4,"div",12)(5,"button",13),t._uU(6,"Cancel"),t.qZA(),t.TgZ(7,"button",14),t._uU(8," Delete "),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("mat-dialog-close",!0))}let U=(()=>{class o{constructor(e,a,r){this.mamdaniService=e,this.dialog=a,this.route=r}ngOnInit(){this.route.url.pipe((0,vt.q)(1)).subscribe(e=>{this.type=e[0].path,this.handleSubscriptions()})}handleSubscriptions(){"inputs"===this.type?(this.title="Inputs",this.variables$=this.mamdaniService.inputVariables$):(this.title="Output",this.variables$=this.mamdaniService.outputVariables$)}openDialog(e){this.dialog.open(dt,{data:{type:this.type,variable:e},width:"1200px"})}onRemoveItem(e){"inputs"!==this.type?this.dialog.open(this.deleteDialog).afterClosed().subscribe(r=>{r&&this.mamdaniService.removeOutputVariable()}):this.mamdaniService.removeInputVariable(e)}showAddButton(e){return"inputs"===this.type||!e.length}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.q),t.Y36(c.uw),t.Y36(_.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-variables-list"]],viewQuery:function(e,a){if(1&e&&t.Gf(zt,5),2&e){let r;t.iGM(r=t.CRH())&&(a.deleteDialog=r.first)}},decls:4,vars:3,consts:[["class","mat-elevation-z0",4,"ngIf"],["deleteDialog",""],[1,"mat-elevation-z0"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["matLine",""],["mat-icon-button","","color","primary",3,"click"],[3,"type","variable","variableIndex","removeItem"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,a){1&e&&(t.YNc(0,Ot,9,4,"mat-card",0),t.ALo(1,"async"),t.YNc(2,Jt,9,1,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",t.lcZ(1,1,a.variables$))},dependencies:[s.sg,s.O5,d.lW,T.Hw,b.i$,b.Tg,h.X2,u.a8,u.dn,u.n5,u.hq,c.ZT,c.uh,c.xY,c.H8,Tt,s.Ov],styles:["mat-list-item[_ngcontent-%COMP%]{margin-top:20px;height:auto!important}"]}),o})();const Nt=[{path:"",component:E,children:[{path:"",redirectTo:"inputs",pathMatch:"full"},{path:"inputs",component:U},{path:"output",component:U},{path:"rules",component:nt}]}];let Ut=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[_.Bz.forChild(Nt),_.Bz]}),o})(),Lt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[L.m,Ut]}),o})()}}]);